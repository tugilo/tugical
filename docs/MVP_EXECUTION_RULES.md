# tugical MVP 実装：計画遵守・進捗更新・ドキュメント同期 実行指示

**あなたの役割**: tugical プロジェクトの MVP 実装担当。設計・方針・判断はすでに確定している。  
**あなたの仕事**: (1) 計画に従って実装する (2) 必ず関連ドキュメントを更新する (3) 進捗を可視化しながら最後まで完走する。  
**仕事ではないこと**: 考え直す・作り替える・広げる。

「コードだけ書いて終わり」は禁止。

---

## 0. 基本方針（Phase A のみ実装）

tugical は段階的に進化する。

| フェーズ | 内容 | 実装 |
|----------|------|------|
| **A** | 予約を迷わず完了できるシステム（現在） | **対象** |
| **B** | 予約から売上を最大化するシステム（将来） | **しない。設計上の拡張余地だけ残す。** |

### 🚫 やってはいけないこと

- 売上最大化機能を実装しない
- 再来店促進機能を作らない
- 回数券・ポイント・CRM を作らない
- 複数店舗機能を作らない
- 本部管理画面を作らない
- 業種特化ロジックを入れない
- 仕様を拡張解釈しない

### ✅ 今やること（A のゴールのみ）

- LIFF で予約が完走する
- 仮押さえ → 確定が成立する
- 管理画面で確認・編集できる
- 予約確定・変更時に LINE 通知が届く

**この範囲を超える実装は行わない。**

### 🧠 構造だけ B を壊さない（拡張は実装しない）

A を実装する際に守る構造のみ：

1. 予約は必ず **store_id スコープ**で完全分離
2. 予約に将来拡張可能な構造を残す（menu_id・price・options 等は仕様どおり）
3. 通知は**テンプレート置換方式**を維持
4. ロジックに**業種分岐を入れない**

---

## 1. 正とするドキュメント（優先順・厳守）

実装・判断は、**以下の順**で従う。

| 順位 | ドキュメント |
|------|--------------|
| 1 | `backend/docs/MVP_EXECUTION_RULES.md`（本書） |
| 2 | `backend/docs/MVP_IMPLEMENTATION_PLAN.md` |
| 3 | `backend/docs/CONCEPT_SPEC_FIT_GAP.md` |
| 4 | `backend/docs/tugical_requirements_specification_v1.1.md` |

必要に応じて `tugical_project_overview.md`・`STATUS.md`・`CONCEPT_REQUIREMENTS_FIT_GAP.md` を参照する。

迷った場合は**実装を止めて** Fit & Gap を参照し、判断を記録する。

---

## 2. 絶対ルール（破ると失敗）

- **[MVP] 以外の要件に手を出さない**
- **業種特化・業種分岐を実装しない**
- **新機能を提案・追加しない**
- **仕様を拡張・解釈しすぎない**
- **ドキュメント更新なしでタスク完了にしない**
- **多店舗・tenant 導入を MVP でしない**（tugical は単店舗の相棒をコアとし、多店舗・本部・横断は tugical+ として将来追加する。境界は `TUGICAL_PLUS_BOUNDARY_v1.0.md` を参照。）

---

## 3. 実行フロー（この順番を厳守）

### Step 1：着手タスクの選択

- `backend/docs/MVP_IMPLEMENTATION_PLAN.md` を開く
- **次に着手すべきタスクを 1 つだけ**選ぶ
- **選んだタスクのステータスを ⬜ 未着手 → 🟡 進行中 に変更する**
- 並列作業は禁止

### Step 2：作業前チェック（必須）

作業開始前に、以下を確認し**記録する**。

- 対応する [MVP] 要件（v1.1）
- タスクの**完了条件**
- 関連する仕様書・Fit & Gap

👉 **確認内容・注意点を MVP_IMPLEMENTATION_PLAN.md の該当タスク欄に追記する**

### Step 3：実装

- **計画書に書かれている範囲のみ**実装する
- 書かれていない挙動は実装しない
- 判断が必要になったら**即停止**する

### Step 4：動作確認

- **完了条件**を Yes / No で確認する
- **最低限の手動テスト**を実施する
- 不明点・未対応があれば**明文化**する

### Step 5：ドキュメント更新（必須・省略不可）

実装完了時、**必ず**以下を更新する。

| 更新対象 | 内容 |
|----------|------|
| **MVP_IMPLEMENTATION_PLAN.md** | ステータスを 🟡 → **✅ 完了** に変更。実施内容サマリー（2〜3 行）。残課題・注意点（あれば）。 |
| **STATUS.md**（必要に応じて） | 進捗反映 |
| **tugical_requirements_specification_v1.1.md**（必要に応じて） | 解釈メモ・注意書きのみ |

👉 **コードを書いたら、必ずドキュメントも書く**

---

## 4. 進捗管理ルール・作業ルール

- 進捗管理は**絵文字ステータスのみ**（⬜ 未着手 / 🟡 進行中 / ✅ 完了）
- **1 タスクずつ完了させる**。着手時に ⬜ → 🟡、完了時に 🟡 → ✅
- **実施内容を必ず計画書（MVP_IMPLEMENTATION_PLAN.md）に記録する**
- **「ついでにやる」は禁止**
- **未完了のまま次タスクに進まない**

---

## 5. 再開ルール（途中で止まっても OK）

再開時は必ず以下を行う。

1. `backend/docs/MVP_IMPLEMENTATION_PLAN.md` を開く
2. 最後に **🟡** または **⬜** のタスクを確認する
3. 「**次に着手すべきタスクの判断ルール**」に従う
4. そこから再開する

---

## 6. 禁止事項まとめ

- **「ついでにやった」**実装
- **「後でまとめる」**判断
- **記録なしの完了宣言**
- **計画書にない作業**

---

## 7. ゴール・完了基準

- MVP の**全タスクが ✅** になり、**βリリース条件が満たされた状態**をもって **Phase A 完了**とする
- `MVP_IMPLEMENTATION_PLAN.md` が**進捗ログとして完全に機能**する
- **Phase B**（売上最大化等）は、A 完了**後に**設計検討を開始する。現フェーズでは実装しない

---

## 8. 毎回の最終確認

| 質問 | 答えること |
|------|------------|
| これは [MVP] か？ | Yes でなければ手を出さない |
| 計画書に書いてあるか？ | Yes でなければ追加しない |
| ドキュメントは更新したか？ | Yes でなければ完了にしない |

**3 つすべて Yes のときだけ、次に進む。**
